---
// src/pages/ru/index.astro

// ИСПРАВЛЕНИЕ: Явно указываем, что эта страница должна быть сгенерирована статически.
export const prerender = true;

import BaseLayout from '../../layouts/BaseLayout.astro';
import Hero from '../../components/sections/Hero.astro';
import Services from '../../components/sections/Services.astro';
import About from '../../components/sections/About.astro';
import Portfolio from '../../components/sections/Portfolio.astro';
import Contact from '../../components/sections/Contact.astro';
import SuccessModal from '../../components/modals/SuccessModal.astro';
import ErrorModal from '../../components/modals/ErrorModal.astro';
import { getCollection } from 'astro:content';

const pageTitleKey = "page_title";
const pageDescKey = "hero_p";

const projects = await getCollection('projects', ({ id }) => id.startsWith('ru/'));

const personSchema = {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "Алексей Пацкевич",
    "jobTitle": "Full-Stack Разработчик",
    "url": Astro.site ? Astro.site.toString() : "",
    "image": new URL("/assets/images/about-photo.webp", Astro.site).href,
    "sameAs": [
        "https://github.com/AVP-dev",
        "https://t.me/avp_dev"
    ]
};
---
<BaseLayout title={pageTitleKey} description={pageDescKey} schema={personSchema}>
  <Hero />
  <Services />
  <About />
  <Portfolio projects={projects} />
  <Contact />

  <SuccessModal />
  <ErrorModal />
</BaseLayout>
