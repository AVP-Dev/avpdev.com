---
// src/components/FeaturedPostCard.astro
import type { CollectionEntry } from 'astro:content';
import { getLangFromUrl } from '../i18n/utils';

interface Props {
  post: CollectionEntry<'blog'>;
}

const { post } = Astro.props;
const lang = getLangFromUrl(Astro.url);

const formattedDate = new Date(post.data.pubDate).toLocaleDateString(lang, {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
});
---
<a href={`/${lang}/blog/${post.slug.split('/')[1]}/`} class="featured-card">
  {post.data.heroImage && (
    <div class="featured-card-image">
      <img
        src={post.data.heroImage.src}
        alt={`Обложка статьи: ${post.data.title}`}
        width="800"
        height="450"
        loading="lazy"
        decoding="async"
        style="object-fit: cover; width: 100%; height: 100%;"
      />
    </div>
  )}
  <div class="featured-card-info">
    <p class="blog-card-date">{formattedDate}</p>
    <h3 class="featured-card-title">{post.data.title}</h3>
    <p class="blog-card-desc">{post.data.description}</p>
    <div class="portfolio-tags">
      {post.data.tags.map(tag => (
        <span class="tag">{tag}</span>
      ))}
    </div>
  </div>
</a>
