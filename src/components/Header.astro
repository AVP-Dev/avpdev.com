---
// src/components/Header.astro
import { Image } from "astro:assets";
import logo from "../assets/images/logo.svg";
import { getLangFromUrl, useTranslations } from "../i18n/utils";
import LanguageSwitcher from "./LanguageSwitcher.astro";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const homePath = `/${lang}/`;
---

<header>
    <nav class="container">
        <a href={homePath} class="logo">
            <Image
                src={logo}
                alt="AVPdev.com Logo"
                class="logo-img"
                width="40"
                height="40"
                loading="eager"
                fetchpriority="high"
            />
            <span class="logo-text"
                >AVP<span class="gradient-text">dev.com</span></span
            >
        </a>
        <ul class="nav-links">
            <li><a href={`${homePath}#about`}>{t("nav_about")}</a></li>
            <li><a href={`${homePath}#stack`}>{t("nav_services")}</a></li>
            <li><a href={`/${lang}/projects/`}>{t("nav_portfolio")}</a></li>
            <li><a href={`/${lang}/blog/`}>{t("nav_blog")}</a></li>
            <li><a href={`/${lang}/brief/`}>{t("nav_brief")}</a></li>
            <li><a href={`${homePath}#contact`}>{t("nav_contact")}</a></li>
        </ul>
        <div class="controls">
            <button
                class="control-btn theme-switcher"
                aria-label="Переключить тему"
            >
                <i class="fas fa-sun" aria-hidden="true"></i>
            </button>
            <LanguageSwitcher />
        </div>
        <button class="burger-menu" aria-label="Открыть меню">
            <div></div>
            <div></div>
            <div></div>
        </button>
    </nav>
</header>

<!-- Мобильное меню вынесено сюда же для инкапсуляции -->
<div class="mobile-nav-overlay"></div>
<div class="mobile-nav">
    <ul>
        <li><a href={`${homePath}#about`}>{t("nav_about")}</a></li>
        <li><a href={`${homePath}#stack`}>{t("nav_services")}</a></li>
        <li><a href={`/${lang}/projects/`}>{t("nav_portfolio")}</a></li>
        <li><a href={`/${lang}/blog/`}>{t("nav_blog")}</a></li>
        <li><a href={`/${lang}/brief/`}>{t("nav_brief")}</a></li>
        <li><a href={`${homePath}#contact`}>{t("nav_contact")}</a></li>
    </ul>
    <div class="mobile-controls">
        <button
            class="control-btn theme-switcher"
            aria-label="Переключить тему"
        >
            <i class="fas fa-sun" aria-hidden="true"></i>
        </button>
        <LanguageSwitcher />
    </div>
</div>
