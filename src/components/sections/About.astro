---
// src/components/sections/About.astro
import { Image } from "astro:assets";
import aboutPhoto from "../../assets/images/about-photo.webp";
import { getLangFromUrl, useTranslations } from "../../i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const homePath = `/${lang}/`;
---

<section id="about">
    <div class="container">
        <div class="about-content">
            <div class="about-image-wrapper fade-in">
                <Image
                    src={aboutPhoto}
                    alt="Фотография Алексея Пацкевича, full-stack разработчика"
                    width={600}
                    height={800}
                    widths={[300, 600]}
                    sizes="(max-width: 1024px) 300px, 600px"
                    loading="lazy"
                    decoding="async"
                    quality={80}
                    class="about-image"
                />
                <div class="image-gradient-border"></div>
            </div>
            <div class="about-text fade-in">
                <h2>{t("about_h2")}</h2>
                <h3>{t("about_h3")}</h3>
                <p>{t("about_p")}</p>

                <div class="about-cta-container">
                    <a href={`${homePath}#portfolio`} class="cta-button">
                        {t("about_cta_portfolio")}
                    </a>
                    <a
                        href={`${homePath}#contact`}
                        class="cta-button secondary"
                    >
                        {t("about_cta_contact")}
                    </a>
                </div>
            </div>
        </div>

        <div id="stack" class="tech-stack-detailed fade-in">
            <h3 class="tech-stack-title">{t("about_tech")}</h3>
            <div class="tech-categories">
                <div class="tech-category-card">
                    <h4>
                        <i
                            class="fas fa-server"
                            aria-hidden="true"
                            style="color: var(--accent-color-start); margin-right: 12px;"
                        ></i>Backend
                    </h4>
                    <div class="tech-list">
                        <span>Python (Flask, Django)</span>
                        <span>Node.js (Express, NestJS)</span>
                        <span>Bun</span>
                        <span>PHP</span>
                    </div>
                </div>
                <div class="tech-category-card">
                    <h4>
                        <i
                            class="fas fa-laptop-code"
                            aria-hidden="true"
                            style="color: var(--accent-color-start); margin-right: 12px;"
                        ></i>Frontend
                    </h4>
                    <div class="tech-list">
                        <span>React (Next.js, Astro)</span>
                        <span>TypeScript</span>
                        <span>Tailwind CSS</span>
                        <span>SASS / CSS3</span>
                    </div>
                </div>
                <div class="tech-category-card">
                    <h4>
                        <i
                            class="fas fa-database"
                            aria-hidden="true"
                            style="color: var(--accent-color-start); margin-right: 12px;"
                        ></i>Databases
                    </h4>
                    <div class="tech-list">
                        <span>PostgreSQL / MySQL</span>
                        <span>MongoDB / Redis</span>
                        <span>Drizzle / Prisma</span>
                    </div>
                </div>
                <div class="tech-category-card">
                    <h4>
                        <i
                            class="fas fa-cloud"
                            aria-hidden="true"
                            style="color: var(--accent-color-start); margin-right: 12px;"
                        ></i>DevOps
                    </h4>
                    <div class="tech-list">
                        <span>Docker / Kubernetes</span>
                        <span>GitLab CI/CD</span>
                        <span>AWS / Nginx</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
    .about-content {
        display: grid;
        grid-template-columns: 320px 1fr;
        gap: 5rem;
        align-items: center;
        margin-bottom: 80px;
    }

    .about-image-wrapper {
        position: relative;
        width: 320px;
        height: 420px;
        border-radius: 24px;
        overflow: hidden;
    }

    .about-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: center 20%;
    }

    .image-gradient-border {
        position: absolute;
        inset: 0;
        border: 2px solid transparent;
        border-radius: 24px;
        background: linear-gradient(
                135deg,
                var(--accent-color-start),
                transparent
            )
            border-box;
        -webkit-mask:
            linear-gradient(#fff 0 0) padding-box,
            linear-gradient(#fff 0 0);
        mask:
            linear-gradient(#fff 0 0) padding-box,
            linear-gradient(#fff 0 0);
        -webkit-mask-composite: destination-out;
        mask-composite: exclude;
        pointer-events: none;
    }

    .badge {
        display: inline-block;
        padding: 4px 12px;
        background: var(--tag-bg);
        color: var(--tag-text);
        border-radius: 6px;
        font-family: var(--font-mono);
        font-size: 0.8rem;
        margin-bottom: 1rem;
        font-weight: 600;
    }

    .about-text h2 {
        font-size: 2.5rem;
        margin-bottom: 1rem;
        text-align: left;
    }

    .about-text h3 {
        font-size: 1.25rem;
        color: var(--accent-color-start);
        margin-bottom: 1.5rem;
        font-weight: 600;
    }

    .about-text p {
        font-size: 1.1rem;
        color: var(--text-secondary-color);
        max-width: 650px;
        margin-bottom: 2.5rem;
    }

    .about-cta-container {
        display: flex;
        gap: 1.25rem;
    }

    .tech-stack-detailed {
        border-top: 1px solid var(--border-color);
        padding-top: 60px;
    }

    .tech-stack-title {
        font-size: 1.75rem;
        margin-bottom: 3rem;
        text-align: center;
    }

    .tech-categories {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 2rem;
    }

    .tech-category-card {
        background: var(--primary-color);
        padding: 2.5rem 2rem;
        border-radius: 24px;
        border: 1px solid var(--glass-border);
        transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.4s cubic-bezier(0.4, 0, 0.2, 1), border-color 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        will-change: transform;
        box-shadow: var(--card-shadow);
    }

    .dark-theme .tech-category-card {
        box-shadow:
            var(--card-shadow),
            inset 0 1px 1px rgba(255, 255, 255, 0.05);
    }

    .tech-category-card:hover {
        border-color: rgba(var(--accent-color-start-rgb), 0.4);
        transform: translateY(-8px);
        box-shadow: 0 30px 60px rgba(0, 0, 0, 0.5);
    }

    .tech-category-card h4 {
        font-size: 1.1rem;
        margin-bottom: 1.5rem;
        color: var(--text-color);
    }

    .tech-list {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
    }

    .tech-list span {
        font-family: var(--font-mono);
        color: var(--text-secondary-color);
        font-size: 0.9rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .tech-list span::before {
        content: "→";
        color: var(--accent-color-start);
        font-family: var(--font-body);
    }

    @media (max-width: 992px) {
        .about-content {
            grid-template-columns: 1fr;
            text-align: center;
            justify-items: center;
        }
        .about-text h2 {
            text-align: center;
        }
        .about-text p {
            margin-left: auto;
            margin-right: auto;
        }
        .about-cta-container {
            justify-content: center;
        }
    }
</style>
