---
// src/components/sections/About.astro
import { Image } from 'astro:assets';
import aboutPhoto from '../../assets/images/about-photo.webp';
import { getLangFromUrl, useTranslations } from '../../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const homePath = `/${lang}/`;
---
<section id="about">
    <div class="container">
        <div class="about-content">
            <div class="about-image-wrapper fade-in">
                <Image
                    src={aboutPhoto}
                    alt="–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è –ê–ª–µ–∫—Å–µ—è –ü–∞—Ü–∫–µ–≤–∏—á–∞, full-stack —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞"
                    widths={[300, 600]}
                    sizes="(max-width: 1024px) 300px, 600px"
                    loading="lazy"
                    decoding="async"
                    quality={80}
                    class="about-image"
                />
            </div>
            <div class="about-text fade-in" style="transition-delay: 200ms;">
                <h2 class="section-title" style="text-align: center; margin-bottom: 1rem;">{t('about_h2')}</h2>
                <h3>{t('about_h3')}</h3>
                <p>{t('about_p')}</p>

                <div class="about-cta-container">
                    <a href={`${homePath}#portfolio`} class="cta-button secondary">{t('about_cta_portfolio')}</a>
                    <a href={`${homePath}#contact`} class="cta-button">{t('about_cta_contact')}</a>
                </div>
            </div>
        </div>

        <div class="tech-stack-detailed fade-in" style="transition-delay: 400ms;">
             <h3 class="tech-stack-title">{t('about_tech')}</h3>
             <div class="tech-categories">
                 <div class="tech-category">
                     <h4>üß† Backend</h4>
                     <div class="tech-items">
                         <span><i class="fab fa-python" aria-hidden="true" style="color: #3776AB;"></i> Python (Flask, Django)</span>
                         <span><i class="fab fa-node-js" aria-hidden="true" style="color: #339933;"></i> Node.js (Express, NestJS)</span>
                         <span><i class="fab fa-php" aria-hidden="true" style="color: #777BB4;"></i> PHP</span>
                     </div>
                 </div>
                 <div class="tech-category">
                     <h4>üé® Frontend</h4>
                     <div class="tech-items">
                         <span><i class="fab fa-react" aria-hidden="true" style="color: #61DAFB;"></i> React (Next.js, Redux)</span>
                         <span><i class="fas fa-rocket" aria-hidden="true" style="color: #FF5D01;"></i> Astro</span>
                         <span><i class="fab fa-js-square" aria-hidden="true" style="color: #F7DF1E;"></i> TypeScript</span>
                         <span><i class="fab fa-html5" aria-hidden="true" style="color: #E34F26;"></i> HTML5 / CSS3 (SASS)</span>
                     </div>
                 </div>
                 <div class="tech-category">
                     <h4>üóÑÔ∏è Databases</h4>
                     <div class="tech-items">
                         <span><i class="fas fa-database" aria-hidden="true" style="color: #336791;"></i> PostgreSQL / MySQL</span>
                         <span><i class="fas fa-database" aria-hidden="true" style="color: #47A248;"></i> MongoDB</span>
                         <span><i class="fas fa-database" aria-hidden="true" style="color: #D82C20;"></i> Redis</span>
                     </div>
                 </div>
                 <div class="tech-category">
                     <h4>‚òÅÔ∏è DevOps & Cloud</h4>
                     <div class="tech-items">
                         <span><i class="fab fa-docker" aria-hidden="true" style="color: #2496ED;"></i> Docker / Kubernetes</span>
                         <span><i class="fas fa-cogs" aria-hidden="true" style="color: #6c757d;"></i> CI/CD (GitLab, Jenkins)</span>
                         <span><i class="fab fa-aws" aria-hidden="true" style="color: #FF9900;"></i> AWS</span>
                     </div>
                 </div>
             </div>
        </div>
    </div>
</section>

<style>
.about-image-wrapper {
    position: relative;
    overflow: hidden;
    width: 300px;
    height: 300px;
    border-radius: 50%;
    border: 2px solid var(--glass-border);
    box-shadow: 0 5px 25px rgba(0, 0, 0, 0.15);
    flex-shrink: 0;
    transition: transform 0.3s ease;
}
.about-image-wrapper:hover {
    transform: scale(1.05);
}
.about-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center 60%;
}
</style>